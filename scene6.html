<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Hello World</title>
</head>
<style>
  @font-face {
    font-family: 'title';
    font-weight: bold;
    src: url("BEBASNEUE.otf") format("opentype");
  }
  html, body {
    font-family: 'title', Fallback, sans-serif;
    margin:0px;
    height:100%;
    width:100%;
    background-color: black;
  }
  
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.5.1/pixi.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.0.5/howler.min.js"></script>
<body>
<div id="playground" style="margin-left: 50px; margin-top: 100px"></div>
</body>
<script src="js/classes/Element.js"></script>
<script src="js/classes/Graphic.js"></script>
<script src="js/classes/GraphicRec.js"></script>
<script src="js/classes/Circle.js"></script>
<script src="js/classes/Text.js"></script>
<script type="text/javascript">
  
  
  var app = new PIXI.Application(1280, 720);

  function soundSetup() {
    var sound = new Howl({
      src: ['assets/sound/all-edit1.wav']
    });
    sound.once('load', function(){
      sound.play();
      onAssetsLoaded()
    });
  }
  app.renderer.view.style.position = "absolute";
  app.renderer.view.style.display = "block";
  app.renderer.autoResize = true;
  app.renderer.backgroundColor = 0xF34D56
  document.getElementById('playground').appendChild(app.renderer.view);
  app.stop()
  PIXI.loader
    .add('study', 'assets/scene6/study.png')
    .add('sport', 'assets/scene6/sport.png')
    .add('art', 'assets/scene6/art.png')
    .add('oct', 'assets/scene6/oct.png')
    .add('feb', 'assets/scene6/feb.png')
    .add('arrow', 'assets/scene6/arrow.png')
    .load(onAssetsLoaded);
  let scrollingValue = 0;

let stage = [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]

function end(output, stageNumber) {
  if(output) stage[stageNumber] += 1
}

function onAssetsLoaded(loader, resources)
{
  const num2 = new Text({
    size: 70,
    fontName: 'title',
    color: '#FFFFFF',
    text: '1st round'
  })

  const num1 = new Text({
    size: 140,
    fontName: 'title',
    color: '#FFFFFF',
    text: 'Portfolio'
  })
  const right = new GraphicRec({
    width: 500,
    height: 720,
    posX: 2000,
    posY: 360,
    color: 0xFFD866
  })
  const coverright = new GraphicRec({
    width: 1280,
    height: 720,
    posX: 1280,
    posY: 360,
    color: 0xFFD866
  })
  const study = new Element({
    name: 'study',
    scale: 1
  })
  study.setPos({
    x: 337,
    y: 90
  })
  const sport = new Element({
    name: 'sport',
    scale: 1
  })
  sport.setPos({
    x: 0,
    y: 290
  })
  const art = new Element({
    name: 'art',
    scale: 1
  })
  art.setPos({
    x: 2000,
    y: 290
  })
  const oct = new Element({
    name: 'oct',
    scale: 0.8
  })
  oct.setPos({
    x: 1050,
    y: 100
  })
  
  const feb = new Element({
    name: 'feb',
    scale: 0.8
  })
  feb.setPos({
    x: 1050,
    y: 400
  })
  const arrow = new Element({
    name: 'arrow',
    scale: 1
  })
  arrow.setPos({
    x: 1110,
    y: 355
  })
  
  arrow.Sprite.rotation=1.57079633
  num1.setPos({ x: 420, y : 330 })
  num1.setOpacity({ opacity:0 })
  num2.setPos({ x: 530, y : 230 })
  num2.setOpacity({ opacity:0 })
  oct.setOpacity({ opacity:0 })

  const backgroundContainer = new PIXI.Container()
  const coverContainer = new PIXI.Container()
  const elementContainer = new PIXI.Container()
  const frontEffectContainer = new PIXI.Container()
  const behideEffectContainer = new PIXI.Container()
  const frontContainer = new PIXI.Container()
  
  app.stage.addChild(backgroundContainer)
  app.stage.addChild(behideEffectContainer)
  app.stage.addChild(elementContainer)
  app.stage.addChild(frontEffectContainer)
  app.stage.addChild(coverContainer)
  app.stage.addChild(frontContainer)
  
  
  var deltaTimes = 0
  app.ticker.speed = 0.015

  app.ticker.add(function(delta) {
    
    deltaTimes += delta


    if(deltaTimes >= 0.95) {
      switch(stage[1]) {
        case 1:
        frontContainer.addChild(num2.Text)
          end(num2.fadeIn({
            alpha: 1,
            speed: 0.08
          }), 1)
          break
      }
    }

    if(deltaTimes >= 1.65) {
      switch(stage[1]) {
        case 2:
        frontContainer.addChild(num1.Text)
          end(num1.fadeIn({
            alpha: 1,
            speed: 0.08
          }), 1)
          break
      }
    }
    if(deltaTimes >= 5.1) {
      switch(stage[1]) {
        case 3:
          end(num1.fadeOut({
            alpha: 1,
            speed: 0.08
          }), 1)
          end(num2.fadeOut({
            alpha: 1,
            speed: 0.08
          }), 1)
          break
        case 5:
          elementContainer.addChild(study.Sprite)
          end(study.moveToX({
            endPos: { x: 640, y: 500 },
            speed: 100,
          }), 1)
          break
    }
  }
    if(deltaTimes >= 5.7) {
      switch(stage[1]) {
      case 6:
        elementContainer.addChild(sport.Sprite)
          end(sport.moveToX({
            endPos: { x: 320, y: 500 },
            speed: 100,
          }), 1)
          break
      }
    }
    if(deltaTimes >= 6.1) {
      switch(stage[1]) {
      case 7:
        elementContainer.addChild(art.Sprite)
          end(art.moveToX({
            endPos: { x: 960, y: 600 },
            speed: 100,
          }), 1)
          break
      }   
    }
    if(deltaTimes >= 8.7) {
      backgroundContainer.addChild(right.Sprite)
        right.moveToX({
          endPos: { x: 1100, y: 0 },
          speed: 100,
        })
        study.moveToX({
          endPos: { x: 435, y: 91 },
          speed: 15,
        })
        sport.moveToX({
          endPos: { x: 220, y: 291 },
          speed: 15,
        })
        art.moveToX({
          endPos: { x: 650, y: 291 },
          speed: 18,
        })
    }
    if(deltaTimes >= 9) {
      switch(stage[2]) {
      case 1:
        elementContainer.addChild(oct.Sprite)
          end(oct.fadeIn({
            alpha: 1,
            speed: 100,
          }), 2)
          break
      }   
    }
      if(deltaTimes >= 9.9) {
      switch(stage[2]) {
      case 2:
        elementContainer.addChild(arrow.Sprite)
          end(arrow.fadeIn({
            alpha: 1,
            speed: 100,
          }), 2)
          break
      }   
    }
    if(deltaTimes >= 10.5) {
      switch(stage[2]) {
      case 3:
        elementContainer.addChild(feb.Sprite)
          end(feb.fadeIn({
            alpha: 1,
            speed: 100,
          }), 2)
          break
      }   
    }
    if(deltaTimes >= 12.5) {
      coverContainer.addChild(coverright.Sprite)
      coverright.moveToX({
          endPos: { x: 640, y: 0 },
          speed: 100,
        })
        end(oct.fadeOut({
          alpha: 0,
          speed: 100,
        }), 2)
        end(feb.fadeOut({
          alpha: 0,
          speed: 100,
        }), 2)
        end(arrow.fadeOut({
          alpha: 0,
          speed: 100,
        }), 2)
        
   
    }
    
  })
  app.start()
  
  
}

</script>
</html>